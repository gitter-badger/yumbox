(function(){var e,t;t=window.sys.modules.guests,e=function(e,n,s,r){return e.guest_key=n.id,e.user_key=n.user_key,e.reviews=t.constants.reviews,e.interests=sys.defaults.interests,e.guest=s.getGuest(e.guest_key),r.get(t.endpoints.get.replace(":id",e.guest_key),{cache:!1}).then(function(n){return e.guest=n.data.data,r.get(t.endpoints.activities.suggest.replace(":id",e.guest.user_key)).then(function(t){return e.activities=t.data.data})}),e.passport_confirmation=function(n){var s;return s={confirmed:n===e.reviews.approved},r.put(t.endpoints.passport.replace(":id",e.guest.user_key),s).then(function(t){return t.data.data.success?e.guest.user.passport.review.status=n:void 0})},e.checkin=function(){return r.post(t.endpoints.checkin.replace(":id",e.guest.doc_key)).then(function(t){return e.guest.checkedin_at=new Date})},e.checkout=function(){return r.post(t.endpoints.checkout.replace(":id",e.guest.doc_key)).then(function(t){return e.guest.checkedout_at=new Date})},e.attend=function(n){var s;return s={user_key:e.guest.user_key},r.post(t.endpoints.activities.attend.replace(":id",n.doc_key),s).then(function(e){return n.has_attended=!0})},e.passport_review={correct_number:!1,correct_image:!1}},e.$inject=t.controllers.show.inject,angular.module(t.name).controller(t.controllers.show.name,e)}).call(this);