(function(){var e,r,n;r=require("path"),e=require("jade"),n=require("lodash"),module.exports=function(u,i){return{users:{verify:function(e,r){return u.methods.users.verify_email(e.query.email,e.query.token).then(function(n){var u;return u=null,n instanceof Error&&(u=n.message),r.view("app/emails/verify",{error:u,email:e.query.email})})},pin:function(e,r){return r.view("app/emails/pin",{pin:e.params.pin})}},plugins:{load:function(e,n){return n.file(r.join(__dirname,"plugins","loader.js"))},guests:function(s,t){return u.methods.hostel_browser_api.with_guests(s.query.uid).then(function(u){var l,a,o;return l=u.settings.guests,null!=s.query.demo&&n.each(l,function(e,r){var n;return n=s.query[r],null==n?!0:("dark"===r&&(n="true"===n),l[r]=n,!0)}),a={guests:u.guests,url:i.config.url,configs:l},null!=s.query.jsonp?(o=e.compileFile(r.join(__dirname,"plugins/guests.jade"))(a),t.cross_html(s.query.callback,o)):t.view("plugins/guests",a)})}}}}}).call(this);